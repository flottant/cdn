"object"==typeof window&&(window.Ribbons=function(){var _w=window,_b=document.body,_d=document.documentElement,random=function(){if(1===arguments.length){if(Array.isArray(arguments[0])){var index=Math.round(random(0,arguments[0].length-1));return arguments[0][index]}return random(0,arguments[0])}return 2===arguments.length?Math.random()*(arguments[1]-arguments[0])+arguments[0]:0},screenInfo=function(e){var width=Math.max(0,_w.innerWidth||_d.clientWidth||_b.clientWidth||0),height=Math.max(0,_w.innerHeight||_d.clientHeight||_b.clientHeight||0),scrollx=Math.max(0,_w.pageXOffset||_d.scrollLeft||_b.scrollLeft||0)-(_d.clientLeft||0),scrolly=Math.max(0,_w.pageYOffset||_d.scrollTop||_b.scrollTop||0)-(_d.clientTop||0);return{width:width,height:height,ratio:width/height,centerx:width/2,centery:height/2,scrollx:scrollx,scrolly:scrolly}},Point=function(x,y){this.x=0,this.y=0,this.set(x,y)};Point.prototype={constructor:Point,set:function(x,y){this.x=x||0,this.y=y||0},copy:function(point){return this.x=point.x||0,this.y=point.y||0,this},multiply:function(x,y){return this.x*=x||1,this.y*=y||1,this},divide:function(x,y){return this.x/=x||1,this.y/=y||1,this},add:function(x,y){return this.x+=x||0,this.y+=y||0,this},subtract:function(x,y){return this.x-=x||0,this.y-=y||0,this},clampX:function(min,max){return this.x=Math.max(min,Math.min(this.x,max)),this},clampY:function(min,max){return this.y=Math.max(min,Math.min(this.y,max)),this},flipX:function(){return this.x*=-1,this},flipY:function(){return this.y*=-1,this}};var Factory=function(options){this._canvas=null,this._context=null,this._sto=null,this._width=0,this._height=0,this._scroll=0,this._ribbons=[],this._options={colorSaturation:"80%",colorBrightness:"60%",colorAlpha:.65,colorCycleSpeed:6,verticalPosition:"center",horizontalSpeed:150,ribbonCount:5,strokeSize:5,parallaxAmount:-.5,animateSections:!0},this._onDraw=this._onDraw.bind(this),this._onResize=this._onResize.bind(this),this._onScroll=this._onScroll.bind(this),this.setOptions(options),this.init()};return Factory.prototype={constructor:Factory,setOptions:function(options){if("object"==typeof options)for(var key in options)options.hasOwnProperty(key)&&(this._options[key]=options[key])},init:function(){try{this._canvas=document.createElement("canvas"),this._canvas.style.display="block",this._canvas.style.position="fixed",this._canvas.style.margin="0",this._canvas.style.padding="0",this._canvas.style.border="0",this._canvas.style.outline="0",this._canvas.style.left="0",this._canvas.style.top="0",this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.style["z-index"]="-1",this._onResize(),this._context=this._canvas.getContext("2d"),this._context.clearRect(0,0,this._width,this._height),this._context.globalAlpha=this._options.colorAlpha,window.addEventListener("resize",this._onResize),window.addEventListener("scroll",this._onScroll),document.body.appendChild(this._canvas)}catch(e){return void console.warn("Canvas Context Error: "+e.toString())}this._onDraw()},addRibbon:function(){var dir=Math.round(random(1,9))>5?"right":"left",stop=1e3,max=this._width+200,movex=0,movey=0,startx="right"===dir?-200:max,starty=Math.round(random(0,this._height));/^(top|min)$/i.test(this._options.verticalPosition)?starty=200:/^(middle|center)$/i.test(this._options.verticalPosition)?starty=this._height/2:/^(bottom|max)$/i.test(this._options.verticalPosition)&&(starty=this._height-200);for(var ribbon=[],point1=new Point(startx,starty),point2=new Point(startx,starty),point3=null,color=Math.round(random(0,360)),delay=0;!(stop<=0);){if(stop--,movex=Math.round((1*Math.random()-.2)*this._options.horizontalSpeed),movey=Math.round((1*Math.random()-.5)*(.25*this._height)),(point3=new Point).copy(point2),"right"===dir){if(point3.add(movex,movey),point2.x>=max)break}else if("left"===dir&&(point3.subtract(movex,movey),point2.x<=-200))break;ribbon.push({point1:new Point(point1.x,point1.y),point2:new Point(point2.x,point2.y),point3:point3,color:color,delay:delay,dir:dir,alpha:0,phase:0}),point1.copy(point2),point2.copy(point3),delay+=4,color+=this._options.colorCycleSpeed}this._ribbons.push(ribbon)},_drawRibbonSection:function(section){if(section){if(section.phase>=1&&section.alpha<=0)return!0;if(section.delay<=0){if(section.phase+=.02,section.alpha=1*Math.sin(section.phase),section.alpha=section.alpha<=0?0:section.alpha,section.alpha=section.alpha>=1?1:section.alpha,this._options.animateSections){var mod=.1*Math.sin(1+section.phase*Math.PI/2);"right"===section.dir?(section.point1.add(mod,0),section.point2.add(mod,0),section.point3.add(mod,0)):(section.point1.subtract(mod,0),section.point2.subtract(mod,0),section.point3.subtract(mod,0)),section.point1.add(0,mod),section.point2.add(0,mod),section.point3.add(0,mod)}}else section.delay-=.5;var s=this._options.colorSaturation,l=this._options.colorBrightness,c="hsla("+section.color+", "+s+", "+l+", "+section.alpha+" )";this._context.save(),0!==this._options.parallaxAmount&&this._context.translate(0,this._scroll*this._options.parallaxAmount),this._context.beginPath(),this._context.moveTo(section.point1.x,section.point1.y),this._context.lineTo(section.point2.x,section.point2.y),this._context.lineTo(section.point3.x,section.point3.y),this._context.fillStyle=c,this._context.fill(),this._options.strokeSize>0&&(this._context.lineWidth=this._options.strokeSize,this._context.strokeStyle=c,this._context.lineCap="round",this._context.stroke()),this._context.restore()}return!1},_onDraw:function(){for(var i=0,t=this._ribbons.length;i<t;++i)this._ribbons[i]||this._ribbons.splice(i,1);this._context.clearRect(0,0,this._width,this._height);for(var a=0;a<this._ribbons.length;++a){for(var ribbon=this._ribbons[a],numSections=ribbon.length,numDone=0,b=0;b<numSections;++b)this._drawRibbonSection(ribbon[b])&&numDone++;numDone>=numSections&&(this._ribbons[a]=null)}this._ribbons.length<this._options.ribbonCount&&this.addRibbon(),requestAnimationFrame(this._onDraw)},_onResize:function(e){var screen=screenInfo();this._width=screen.width,this._height=screen.height,this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,this._context&&(this._context.globalAlpha=this._options.colorAlpha))},_onScroll:function(e){var screen=screenInfo();this._scroll=screen.scrolly}},Factory}());var cn=document.getElementById("ribbon_piao"),mb=cn.getAttribute("mobile");"false"==mb&&/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||new Ribbons({colorSaturation:"60%",colorBrightness:"50%",colorAlpha:.5,colorCycleSpeed:5,verticalPosition:"random",horizontalSpeed:200,ribbonCount:3,strokeSize:0,parallaxAmount:-.2,animateSections:!0});